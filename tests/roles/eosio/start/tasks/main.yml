
########################
# start nodeos
########################

- name: enable and start nodeos
  service:
    name: nodeos
    enabled: yes
    state: restarted

- name: wait for nodeos to start and produce
  wait_for:
    timeout=5
  delegate_to: localhost

- name: tail nodeos log file
  command: tail {{ nodeos_log_file }}
  register: nodeos_log

- name: verify node is producing
  debug:
    msg: "{{ nodeos_log.stdout_lines | quote }}"


########################
# start keosd
########################

- name: enable and start keosd
  service:
    name: keosd
    enabled: yes
    state: restarted

- name: wait for keosd to start and produce
  wait_for:
    timeout=5
  delegate_to: localhost

- name: tail keosd log file
  command: tail {{ keosd_log_file }}
  register: keosd_log

- name: verify keosd is producing
  debug:
    msg: "{{ keosd_log.stdout_lines | quote }}"